services:
  ssh-mcp:
    image: firstfinger/ssh-mcp:latest
    container_name: ssh-mcp
    ports:
      - "8000:8000"
    volumes:
      - ssh-data:/data
    environment:
      # Required
      - PORT=8000
      
      # Session Management
      - SSH_MCP_SESSION_HEADER=X-Session-Key  # [Customize header name for session tracking]
      # - SSH_MCP_SESSION_TIMEOUT=300         # [Idle timeout in seconds before closing SSH sessions]
      # - SSH_MCP_GLOBAL_STATE=false         # [Share one SSH manager for all clients (not recommended for multi-user)]
      
      # Performance & Limits
      # - SSH_MCP_COMMAND_TIMEOUT=120.0       # [Max execution time for an SSH command]
      # - SSH_MCP_MAX_OUTPUT=51200            # [Limit response size to prevent UI lag/timeouts]
      
      # Debugging
      # - SSH_MCP_DEBUG_ASYNCSSH=false       # [Verbose logs for troubleshooting SSH issues]
      
    restart: unless-stopped
    # If using bind mounts, ensure permissions: sudo chown -R 1000:1000 ./data

volumes:
  ssh-data:
    driver: local